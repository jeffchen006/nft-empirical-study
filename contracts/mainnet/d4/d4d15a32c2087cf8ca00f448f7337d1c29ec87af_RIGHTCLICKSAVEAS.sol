// SPDX-License-Identifier: MIT

/// G&@@@@@[email protected]@@[email protected]@@Y^G&@&[email protected]&7!!YG#@@@@@B~!!?7JYY7~!!!7Y5#@G~!!!!GGG&@@@@@[email protected]@@@@@@@@@@@&!!~&@@@@G~~~~&@@G^[email protected]@@@@@@@&
/// &@@@GGG7!JJ#@@@GP!!~5&&@@@#5?!7?!7??!!!?Y5GGGGGY!!7#&GGG5JYYYBBGYY?!!!~~JYJ#@@@@@[email protected]@@@@@@BGG&@&!!!PB#&&GJYGG#&&#[email protected]@@@@&
/// &@@&JYJ!!PG&@@@&#[email protected]@###@B!!!!!!Y#555?~!YJJYY?!!?##YJJB#[email protected]@@[email protected]@@@[email protected]@##&@@[email protected]&!!!~~Y#####&&####&#YYJB#####
/// !#@@@@@7!5G&@@@7!GGG&@&~~~&@Y!!~5#[email protected]@@[email protected]@@@@[email protected]@@@@[email protected]@@[email protected]@@@@?!!?77&@@[email protected]&[email protected]@[email protected]&[email protected]@@@@7~&@@[email protected]@@Y~!!~?
/// &5?YBBB&&[email protected]@@@@&!!!&@[email protected]@@@&&@@@G5Y??P&&@@&B5PGG5YYJ?Y55P#B7~~YBY!?J#&[email protected]@#?J&&&[email protected]??5BB&&[email protected]#???5P#&&#
/// [email protected]@&[email protected]@[email protected][email protected]@@&#&&@@@&&&&&&&@@&&@&&&&&&&##[email protected]@@B~?&&&P?G&&&@&YJ#&&@@@&&&[email protected]@&
/// !?J5&&&J?!~JPPPG&[email protected]@@@@@@@&&@@@@@@@@&@&&@@@@&@@@@@@@@@@@&&&&#G5?!~~!!~!!!J5BP!5&&&[email protected]@@@@Y?&@@@@@&&&5?G&&#
/// ?#@#??J&@[email protected]@@@@#!!!?5#@@&?7!7&@&&&@@@&&&&&&@&&@&&&&&@@@&&&@@&@@@&@@&@@@@@@&&BY7!!!!!!!~7?J!!!PB#@&@@@&&@@@@@#???&@G~!J
/// @[email protected]@@?!&@@@@&[email protected]@@@B!7!!!JGGGG#@#~7&@&&&@@&&@@&@&&@&&@@&&&@@&&@@&&@@@&&&&&@&&&&@@@@@&[email protected][email protected]@?!&@@[email protected]@@@@G~~?
/// @Y^[email protected]@@7~PB&@@&P&@@@G~!7?!B&BGGGG7!G&&&&@@@@@&&@@@&@@&@&&@@@@@@&@&&&@@&&&@&@&&&&&@@&&@@@&5!!!!!!!7?7JG#[email protected]@#JY5
/// @B5G&&&PP7^[email protected]@&[email protected]@@G~!7!!&@@BJ7~7#@&@&&&&@@@&&&@@&@@@&&@&@@@&@&&&&&&@&&&&@@&&&&&@@@@&&@@@#J!!!!!J55J7Y&&B557!Y55G#G???&@#Y5P
/// B&&&###&&BPB&&GJ5BBBGPGGPGBBBJ!!?&@@@@@&&&&&&@&&@&&@@@@@@@&&@@&&&&&@&@&&&@@@&&@&&&&&&@@&@@@&B7!!777Y7!!?#@@@7~B&&#5G&&&@@G~~?
/// !5G#@@@[email protected]@&[email protected]@@@@Y~!!~J&@&&@&&&@@&@@@&@@&&&&&&&@&&@@&&@&@@@&@&&@@&&&@@@@&@@@&&&&&&@@&[email protected]@@7!YP5&@@@@@@@B!!J
/// P&@&??J&@@@@@@[email protected]@G7YBBG?!!~5&@@@@&&&&&&&@@@&&&@@&@&&&@&&&&@@@@&&&&@@&@@@&&&&@&&&@@&&&@@&&&&&G7!!!!!7!?J?J&&[email protected]@@&&&
/// ?&@&[email protected]@GJ#@@[email protected]@B~J&@B!!!P&@&&@&&@@&&@@&@@@&@&&@&&@@@@&&&@@&@&&&&&&@&@@@@&@@@&&&@@&@@&&@@@&@&5!!!!7!!!!?5Y&Y!G55GGGBB&@@&
/// ~&@&!!7#&5?G&&J~!5&&[email protected]@Y~?#@&&&&&@&&@&&&@@@@@@@@@@&&&&@&&@&@@&@@&@&&&@&&&&&&&&@&&&@&&&&@&@@@&&@@#J!!!!!!!!7?##!G#BPP5GB#&&#
/// ?#@#777??&@[email protected]~7#@&@&&&&@&@&@&&@&#BB##&&&&@@&&@@@@@@@@@&@@&&@@&&&@&&@@@@&@@@&&@@&@@@&@&#[email protected][email protected]&!!!&@G~!7
/// @[email protected]@@@@@@&[email protected]@&@&@&@@&&&@&@&BGGGGGGGGGB####BGGBB###&&@&@@@@@&@@@@&&&&&@@@&@@@&&&&[email protected][email protected]&~~~&@G~~?
/// &PJP&&&@@&&@@@@GP!~~?Y7!?#@@&&@&&@@@&&@&@&BGGGGGGGGGGGGGGGGGPP555YYJ#@&@&@&@@@@&&&&@@@&@@@&&&&&&&&P!!!!!!!!!Y&[email protected]@[email protected]@&PGG
/// YYY5BBBBB##&&&&@@GPP5Y!Y&&@@&&@&&@&&&@@&#[email protected]@&&@@&&&&@@&@@&&&@@@&&&@&&&&J!!!!!!!7!Y###[email protected]@B#[email protected]@@@@@
/// !!!!~~~!~&@&[email protected]@@@@P~?&@&@&@@&&@&&@&GYJ7!!!!!!~!!7!!!!!!!!7?5YYJPGGG&@&&&@&&&@@@&@&@&&&@&&&&&@@@&[email protected][email protected]&!!~#@@@@@
/// [email protected]#!!7&&@@[email protected]@J?J!?&@&@@&&@&@&&&@@5?7!!!!!!!!7!!!!!!!!!!7?555GGGPG#@&@@&&&@&@@&@&@&&@&&@&@@&@@&7!!!!!!!!77?7!!7G#&&&[email protected]@&
/// &@@&[email protected]@P?G&&&JJ#7!Y&@@@@&@&@@&&&&@@B7!!!!!!!!!!!!!!~!!!!!!7YJYGBBB##@@&&&@&&&&&&@@&@@@@&@@&@&@@&!~!!!!!!!7!!!!!7&&[email protected]@@
/// [email protected]@J^5###&#Y!J&@@@@@&@&@@@&@@@@G~!!!!!!!!!!~~!!!!!!!!!~~~!!!7J5P&&@@&&&&&&&&@@@@&@@@@&&&@&@&[email protected]@&&&&&GJYY
/// ??7YBBB&@[email protected]@77&@@@@&&@&&@@@@&@@&7!?7~!!!~!!!!!~~!!!!~!!!!!!!~!!!~5&@@&@&&@@&@@@@@@&@@@&&@@@@#[email protected]@@@@@@G~~~
/// @@&@@@@?!#@G!!7&&[email protected]@@&@&@&&&@&@&@@@&77J555J77!!!!!PBBBG5J?!7!!!!!!~!!?G#&&@@&@&@@@&@@&&@&@&&&&@@#!!!!!!!7!!!5&@@#@&7??7!7!!!
/// @[email protected]@@7!!7!~~~!7J!Y#@@&@@&@@&&&&@@@@&&&@@@@&&&[email protected]@@@@@@@5!!!7!!77???7Y&&@&&@&&&&&&&&@@@&&@@&&@#!!!!!77!!!!!PGG&@@@@@J~!!!?
/// &[email protected]&&@&&@@@@@@&PPGGB####&&&5!7?####[email protected]@@&&@&&&&&&@&@&@&&&&&&@&7!!!!!!!!!!~B&&@@@PGGGGY!!?
/// ?&@&~~!YYGG&@@@@@[email protected]&&@&@&@&&@&[email protected]&&@&@@@&&&@&@@&&&&&&&&@&[email protected]@@&[email protected]@B~!?
/// !#@&!!7GBGP&@@@@@?!!!!!#@&&&@@&@@@@G&@@@&@@&&[email protected]&@@@@@#[email protected]&&@&&&@@@&&@&&&&&&@@&&@&[email protected]@@[email protected]@@@@G~!J
/// [email protected]@[email protected]@?!!!!!?&@&&@@&@&@@G&@@&&&@@#[email protected]&&&&&&@J!7??!!!!!!!#@&&&&&@&&@@&&&@@&&&@&@&&@[email protected]@@@@@@G~!?
/// @[email protected]@@&[email protected]@@&[email protected]&@@&@@&&@GYP&&@@&@BJ???7!7&@&&&&&@#~!??!!!!!!!#@&@&&&&&&@@@&&&&@&&@&&&&@Y~!!!!!!Y&[email protected]@[email protected]@G~~?
/// &Y7YBB#@@&&GJJY&&&&J~!!!?&&&@&&@&&@&J?#&@@@&YJ7!?J7~J&@@@@@@@?!???!!77!7&@@@&@@@&@&&@&@@@&&@&&@@@@5~~!!!?J5&[email protected]&555&@BJJ5
/// [email protected]@@&&[email protected]@&?7???!!!!!#@@@@&@@&@#B5?PB5??J?!~!JJ7~5&&#GPPG?J5?Y??77~7&&@&@@@@@@@&@@@@@&@@@@&@@@Y!!!!!77!J&7#@@@@&~!~Y5#@@&
/// @[email protected]@@7!&@#[email protected]@&!!!!!J&@@@@&&&@BPJ7???7??!!~!7?J7!?7!!!77?JJ?PJ!7!!5&@@@@&&@&@@&@@@&&@&&@@&&&@[email protected]@@@#[email protected]@&
/// @[email protected]@@7~&@[email protected]@@5!!!7!75&@&&&&&@@G5J!7Y?7?!!!!!7????????777JJ5J?J?J&&@&&@&&@&@@&@&&&&&@&@&&&&@G~!!!!!!7!!!!#@[email protected]@@@@G~!J
/// @Y~J&&&[email protected]@@G~!!!7!~7B&@&B&@@@&5~~JPJ7~!!777777!!!!!!~!?7777??J&&@&@&@@&&@@&&@&&@@@&&&&&&@[email protected]@@#BGPPP
/// @Y~J&&&BBGP&@@@[email protected]@@&G?!!!!!!!P&@B&@@&&[email protected]&@@&@&@@&&@@@&&&@@@&&&@&@#[email protected]@@@@J^5&&#
/// @[email protected]@@7!&@@@@@[email protected]@@@@P!!!!!!!!Y&#[email protected]&@@@@@@B!?JYXCOPYB&[email protected]@&&@@@&@@@&@@&&@@@@@&&&@&[email protected]@@@@Y!YGPP
/// @@@#77?&&@@@@@@[email protected]!!!!!!!!!G&J7&@@&@&#Y?!!7B#CC0&&#7!!!!!!~!!!!!!!5#&@&@@@&@@@&@@@&@@@@@@&@&@&7!7!!!!!!?P#&@G7YBBB&@G!77
/// ?&@&~~~??&@[email protected][email protected]&[email protected]@&&[email protected]&@@@&&@&&@@@&@@@@@@&&&&&&&&[email protected]#777&@B~~?
/// ~#@&JJJ!~&@G~~!P7!Y&P~!!!!7!!!75&@@&G&@@@&B5?7!7????????7!!!!!!!!!?5#&@@&&&&&&@@@&&@&&@@&@@&@&@@&&&[email protected]&~~~G&GJY5
/// [email protected]@@Y?#&G?J?7~7P#&G?!!!!!7P&@@&@@&&@&&@@@&&J!!!7!!!7!!!!!!!!J5#&@@&@&&&&&@&@@@@@@&@@@@&&&&@@@&@&?!!!!!!!!!#@@@@@&?JJ??G&&#
/// @[email protected]@@@@Y^[email protected]&77P&@@@@&B?!7P&@@&@@@@&&&&&&&&&@&J~!!!!!!7!!!!?P&@@@@@@&&@@&@&&&&@&@@&&@@@@@&&&&@@@@&[email protected]@@@@@@@@@@G~!!
/// @Y^[email protected]@@GPGG&@JJ&@@&@@@@@&#&@@&&&&@@@&@&&&&&@@&@&Y!!?7777!75#@@@@&&@@&&@@&@@&&&&&&@@@@@@@@@@@&&&@@&&&#G#G7~!!!!&@@&#&@@@@@G~~7
/// PGBGPPPBBGP&5?&@@@@@&@@@@@@&&@@&@&&@@@&&@@&&@&@@&P?~!!!?B&&@@@@&&@&&@&@&&@@&@@@&&@&&@@@@&@&&@&&@&&&@@@@@&Y!!7!YPYB&#5P5P5GBBB
/// [email protected]@@GGGGB?~!7#@&&@@@@@&@@@&@@@@@@&&@&&@@&@@@@&&@@@&G5JB&@&&@&&&&@&&&&&@@@@@&@@@&&@@&@@&@@@@@@&@@&&@@@&@&&@#[email protected]@GGGGP&@@@
/// @@@@@@@7~!7G&@&&@@@&&@@@@&@@&@&&@&&&BGB&&&&&&&&&&&&@@&@&@&&&&&&&@&&@&&&&@@@@@@&&&@@@&&&@@&&&&&@&&&@@&&&&&&@&[email protected]@@@@@@@@@
/// @@@@&#B&&#&@@&&@@@@@&@@@@@@@@&&@@&@#GGG#@&&&@&&@&&@@@&&&@@@&@@&&@@&&&@@@@@&@@@@&@@&&@@@&@@&@&&@@@@&&@@&@@@@&@[email protected]@@@@&
/// J&@&&@#&@@@@@&&&@@&&@@@@@&&&@@@@&&&GGGB&&#@&@@&@&&@&&@&&&&@&&&@@@@&&@@@&@&&&&&&@@@@&@@&&@@&&&@&&@@@@@@&@&@@@&@&?!!!!77!&@@@@&
/// 7&@@@@@&&&@@@&&&&&&&@@&@#P&@@@@&#BGGGB&@@@@&@@&@@&&&&&&&&@@&@@@@@@@&&&@@&@&&&@@@@&&&@@&@&@@@&@&@@@@&&&&@&&&&@&@&Y!!!!?YB&&@@@
/// B&@@@&&&&&@@@&@&&&&@&&@&#&@&@&#GGGGB&&&@@&&@&&@@@&@@&&&&&&@&&&&@&@&##@@&@@&&&@@@@&&@@@&@@&@@&@&@@@&&@&@@&&&&&&&@&Y!!!?&[email protected]@@
/// @Y!#@@@&&&@@&&&@&&@@@@@&&@&&&BGGG#&@@&@&@&&@@&@@&@&&&&&@&&@&&@&&&&@BB##&@@&&&&@@@@@@&&&@&&&&&&@@&&&@@&&&&&@&&&&@@@P!!!!YP&@@&
/// 5B#@@&@&&&&@&&@&@@@&&&&&&@&#GGGB&@@@@&@@@&&&@&&&@&&@&@&&&@@&@&&&&&@&#GGG&@&&&&&@@@&&@@@&&&&&@&@@@@@@@&&@@&@@@&@@@&@[email protected]@@
/// ~#@@@@@&&@@&@&@@@@@&@@@@&@&GGG#@&@&&&@@@@&&&@&&&&@@&&&@&@&&&&&@&&&&@&GGGG&@&@@@&@&&@@&&&@&&&&@@@@&&&&@&&@@&@@@@@&&&@&BYYPY&@@
/// !5&&&@@&&@@&&&@@&@@@@@@@&&&##&@&&&@@&@@&@&&@@&&&@@&@&&@&@@&@&&@&@&&@#GGGG&@@@&@&&&&@&&@&@&&@@&@&@&@&&@&&@@&&@@@@@@@@@&G&&#&@&
/// [email protected]@&&@@&@&&&@&@&&@@&&&&&&&#&@&&&&&@&&&&&&&&&&@&&&@@@@&@@&&@@&&&&&@&#GGGG&@@&@&&&&&@&&&&@@&&@&&@@@&&&&@&&&@@@@@@&@&@@@[email protected]@&&@
/// #&@&&&@@&&&&&&&&&&&&&&@&&@&#&&@@&@&@@&@@&&@&@&@&@@&@@@&&&&&&&@&&&&&&BGGGG&&&&@@&&@&&&@@&&@@&&&&&@&&&@&&@@@@@@&&&&@@&@&@P5&@&&
/// @&&&&&&&@@&&@&&&&@&@&&&@&@@@&&&@&@&&@@&@&&&&@@@@@@@@@&@@&&@&@@@&&&&@BGGGG&@&&@&&@&&@@&@&&@@&&&&@@@@&&&&@@@&&&@&&@@@&@@@&?5&@@

pragma solidity ^0.8;

import "./TokenReceiver.sol";

contract RIGHTCLICKSAVEAS {
    string public symbol = "CC0";
    string public name = "RIGHT CLICK SAVE AS";

    address public XCOPY = 0x39Cc9C86E67BAf2129b80Fe3414c397492eA8026;
    string public CID = "QmTA9VN19dxgFEF1H1dJZvmBCFsZRryBBnLKfUJZzFXNmU";

    uint256 public tokenId = 1;
    uint256 public totalSupply = 101;

    mapping (uint256 => address) owners;
    mapping(address => uint256) balances;
    
    mapping(uint256 => address) approvals;
    mapping(address => mapping(address => bool)) operatorApprovals;

    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);
    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);
    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);

    constructor() {}

    function RightClickSaveAs() public {
        require (tokenId <= 101);
        while (tokenId <= 101)
            _mint(msg.sender, tokenId++);
    }

    function supportsInterface(bytes4 interfaceId)
    public pure returns (bool) {
        return interfaceId == 0x80ac58cd || interfaceId == 0x5b5e139f;
    }

    function balanceOf(address owner)
    public view returns (uint256) {
        require(address(0) != owner, "error address(0)");
        return balances[owner];
    }

    function ownerOf(uint256 id)
    public view returns (address) {
        require(owners[id] != address(0), "error !exist");
        return owners[id];
    }

    function tokenURI(uint256 id)
    public view returns (string memory) {
        require(owners[id] != address(0), "error !exist");
        return string(abi.encodePacked(
                'data:application/json;base64,',
                encode(
                    bytes (
                        string(
                            abi.encodePacked(
                                "{",
                                '"name":"RIGHT CLICK SAVE AS CC0",',
                                '"description":"Why would I buy it when I can right click and save as? - XCOPY",',
                                '"image":"ipfs://',
                                CID,
                                '"',
                                "}"
                            )
                        )
                    )
                )
            )
        );
    }

    function approve(address to, uint256 id)
    public {
        address owner = owners[id];
        require(to != owner, "error to");
        require(
            owner == msg.sender ||
            operatorApprovals[owner][msg.sender],
            "error owner"
        );
        approvals[id] = to;
        emit Approval(owner, to, id);
    }

    function getApproved(uint256 id)
    public view returns (address) {
        require(owners[id] != address(0), "error !exist");
        return approvals[id];
    }

    function setApprovalForAll(address operator, bool approved)
    public {
        require(operator != msg.sender, "error operator");
        operatorApprovals[msg.sender][operator] = approved;
        emit ApprovalForAll(msg.sender, operator, approved);
    }

    function isApprovedForAll(address owner, address operator)
    public view returns (bool) {
        return operatorApprovals[owner][operator];
    }

    function transferFrom(address from, address to, uint256 id)
    public {
        require(owners[id] != address(0), "error !exist");
        address owner = owners[id];
        require(
            msg.sender == owner ||
            msg.sender == approvals[id] ||
            operatorApprovals[owner][msg.sender], 
            "error msg.sender"
        );

        _transfer(owner, from, to, id);
    }

    function safeTransferFrom(address from, address to, uint256 id, bytes memory data)
    public {
        address owner = owners[id];
        require(
            msg.sender == owner ||
            msg.sender == approvals[id] ||
            operatorApprovals[owner][msg.sender], 
            "error msg.sender"
        );
        _transfer(owner, from, to, id);
        require(_checkOnERC721Received(from, to, id, data), "error ERC721Receiver");
    }

    function _mint(address to, uint256 id)
    private {
        require(to != address(0), "error to");
        require(owners[id] == address(0), "error owners[id]");
        emit Transfer(address(0), XCOPY, id);

        balances[to]++;
        owners[id] = to;
        
        emit Transfer(XCOPY, to, id);
        require(_checkOnERC721Received(XCOPY, to, id, ""), "error ERC721Receiver");
    }

    function _transfer(address owner, address from, address to, uint256 id)
    private {
        require(owner == from, "errors owners[id]");
        require(address(0) != to, "errors address(0)");

        approve(address(0), id);
        balances[from]--;
        balances[to]++;
        owners[id] = to;
        
        emit Transfer(from, to, id);
    }

    function _checkOnERC721Received(address from, address to, uint256 id, bytes memory _data)
    internal returns (bool) {
        uint256 size;

        assembly {
            size := extcodesize(to)
        }

        if (size > 0)
            try ERC721TokenReceiver(to).onERC721Received(msg.sender, from, id, _data) returns (bytes4 retval) {
                return retval == ERC721TokenReceiver(to).onERC721Received.selector;
            } catch (bytes memory reason) {
                if (reason.length == 0) revert("error ERC721Receiver");
                else assembly {
                        revert(add(32, reason), mload(reason))
                    }
            }
        else return true;
    }
    
    function _toString(uint256 value) private pure returns (string memory) {
        if (value == 0) return "0";

        uint256 digits;
        uint256 tmp = value;

        while (tmp != 0) {
            digits++;
            tmp /= 10;
        }

        bytes memory buffer = new bytes(digits);
        while (value != 0) {
            digits -= 1;
            buffer[digits] = bytes1(uint8(48 + uint256(value % 10)));
            value /= 10;
        }

        return string(buffer);
    }

    function encode(bytes memory data) internal pure returns (string memory) {
        uint256 len = data.length;
        if (len == 0) return "";

        uint256 encodedLen = 4 * ((len + 2) / 3);

        bytes memory result = new bytes(encodedLen + 32);

        bytes memory table = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

        assembly {
            let tablePtr := add(table, 1)
            let resultPtr := add(result, 32)

            for {
                let i := 0
            } lt(i, len) {

            } {
                i := add(i, 3)
                let input := and(mload(add(data, i)), 0xffffff)

                let out := mload(add(tablePtr, and(shr(18, input), 0x3F)))
                out := shl(8, out)
                out := add(out, and(mload(add(tablePtr, and(shr(12, input), 0x3F))), 0xFF))
                out := shl(8, out)
                out := add(out, and(mload(add(tablePtr, and(shr(6, input), 0x3F))), 0xFF))
                out := shl(8, out)
                out := add(out, and(mload(add(tablePtr, and(input, 0x3F))), 0xFF))
                out := shl(224, out)

                mstore(resultPtr, out)

                resultPtr := add(resultPtr, 4)
            }

            switch mod(len, 3)
            case 1 {
                mstore(sub(resultPtr, 2), shl(240, 0x3d3d))
            }
            case 2 {
                mstore(sub(resultPtr, 1), shl(248, 0x3d))
            }

            mstore(result, encodedLen)
        }

        return string(result);
    }
}